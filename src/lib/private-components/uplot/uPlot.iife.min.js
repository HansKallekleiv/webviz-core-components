/*! https://github.com/leeoniya/uPlot (v0.1.0) */
export const uPlot = (function(n) {
    "use strict";
    var t = [
            "January",
            "February",
            "March",
            "April",
            "May",
            "June",
            "July",
            "August",
            "September",
            "October",
            "November",
            "December",
        ],
        e = [
            "Sunday",
            "Monday",
            "Tuesday",
            "Wednesday",
            "Thursday",
            "Friday",
            "Saturday",
        ];
    function r(n) {
        return n.slice(0, 3);
    }
    var u = e.map(r),
        a = t.map(r);
    function i(n) {
        return (10 > n ? "0" : "") + n;
    }
    var o = "getFullYear",
        l = "getMonth",
        c = "getDate",
        f = "getHours",
        s = "getMinutes",
        v = "getSeconds",
        m = {
            YYYY: function(n) {
                return n[o]();
            },
            YY: function(n) {
                return (n[o]() + "").slice(2);
            },
            MMMM: function(n) {
                return t[n[l]()];
            },
            MMM: function(n) {
                return a[n[l]()];
            },
            MM: function(n) {
                return i(n[l]() + 1);
            },
            M: function(n) {
                return n[l]() + 1;
            },
            DD: function(n) {
                return i(n[c]());
            },
            D: function(n) {
                return n[c]();
            },
            WWWW: function(n) {
                return e[n.getDay()];
            },
            WWW: function(n) {
                return u[n.getDay()];
            },
            HH: function(n) {
                return i(n[f]());
            },
            H: function(n) {
                return n[f]();
            },
            h: function(n) {
                var t = n[f]();
                return 0 == t ? 12 : t > 12 ? t - 12 : t;
            },
            AA: function(n) {
                return 12 > n[f]() ? "AM" : "PM";
            },
            aa: function(n) {
                return 12 > n[f]() ? "am" : "pm";
            },
            a: function(n) {
                return 12 > n[f]() ? "a" : "p";
            },
            mm: function(n) {
                return i(n[s]());
            },
            m: function(n) {
                return n[s]();
            },
            ss: function(n) {
                return i(n[v]());
            },
            s: function(n) {
                return n[v]();
            },
            fff: function(n) {
                return (function(n) {
                    return (10 > n ? "00" : 100 > n ? "0" : "") + n;
                })(n.getMilliseconds());
            },
        };
    function h(n) {
        for (var t, e = [], r = /\{([a-z]+)\}|[^{]+/iy; (t = r.exec(n)); )
            e.push("{" == t[0][0] ? m[t[1]] : t[0]);
        return function(n) {
            for (var t = "", r = 0; e.length > r; r++)
                t += "string" == typeof e[r] ? e[r] : e[r](n);
            return t;
        };
    }
    var p = Math,
        d = p.abs,
        g = p.floor,
        b = p.round,
        y = p.ceil,
        x = p.min,
        w = p.max,
        M = p.pow,
        Y = p.log10,
        D = 1 / 0;
    function E(n) {
        return "function" == typeof n
            ? n
            : function() {
                  return n;
              };
    }
    function T(n, t) {
        return y(n / t) * t;
    }
    function k(n) {
        return b(1e6 * n) / 1e6;
    }
    var A = Object.assign,
        C = Array.isArray,
        S = "width",
        W = "height",
        z = "top",
        L = "bottom",
        P = "left",
        H = "right",
        F = "firstChild",
        J = "nextSibling",
        N = "createElement",
        O = "#000",
        R = "classList",
        V = "mousemove",
        _ = "mousedown",
        j = "mouseup",
        q = "dblclick",
        B = requestAnimationFrame,
        U = document,
        X = window,
        Z = devicePixelRatio;
    function G(n, t) {
        n[R].add(t);
    }
    function I(n, t, e) {
        n.style[t] = e + "px";
    }
    function K(n, t, e, r) {
        (n.transformOrigin = t),
            (n.transform = "rotate(" + e + "deg) translateY(" + r + "px)");
    }
    function Q(n, t, e) {
        var r = U[N](n);
        return null != t && G(r, t), null != e && e.appendChild(r), r;
    }
    function $(n, t) {
        return Q("div", n, t);
    }
    function nn(n) {
        for (var t; (t = n[J]); ) t.remove();
        n.remove();
    }
    function tn(n, t, e) {
        n.style.transform = "translate(" + t + "px," + e + "px)";
    }
    var en = { passive: !0 };
    function rn(n, t, e) {
        t.addEventListener(n, e, en);
    }
    function un(n, t, e) {
        t.removeEventListener(n, e, en);
    }
    var an = { color: "#eee", width: 2 },
        on = 60,
        ln = on * on,
        cn = 24 * ln,
        fn = 30 * cn,
        sn = 365 * cn,
        vn = [0.001, 0.002, 0.005, 0.01, 0.02, 0.05, 0.1, 0.2, 0.5],
        mn = vn.concat([
            1,
            5,
            10,
            15,
            30,
            on,
            5 * on,
            10 * on,
            15 * on,
            30 * on,
            ln,
            2 * ln,
            3 * ln,
            4 * ln,
            6 * ln,
            8 * ln,
            12 * ln,
            cn,
            2 * cn,
            3 * cn,
            4 * cn,
            5 * cn,
            6 * cn,
            7 * cn,
            8 * cn,
            9 * cn,
            10 * cn,
            15 * cn,
            fn,
            2 * fn,
            3 * fn,
            4 * fn,
            6 * fn,
            sn,
            2 * sn,
            5 * sn,
            10 * sn,
            25 * sn,
            50 * sn,
            100 * sn,
        ]);
    function hn(n) {
        return n.map(function(n) {
            return [n[0], h(n[1]), n[2], h(n[4] ? n[1] + n[3] : n[3])];
        });
    }
    var pn = "{M}/{D}",
        dn = "\n" + pn,
        gn = hn([
            [sn, "{YYYY}", 7, "", 1],
            [28 * cn, "{MMM}", 7, "\n{YYYY}", 1],
            [cn, pn, 7, "\n{YYYY}", 1],
            [ln, "{h}{aa}", 4, dn, 1],
            [on, "{h}:{mm}{aa}", 4, dn, 1],
            [1, "{h}:{mm}:{ss}{aa}", 4, dn, 1],
        ]);
    function bn(n, t) {
        return function(e) {
            var r = e[1] - e[0],
                u = null,
                a = null;
            return e.map(function(e) {
                var i = n(e),
                    l = i[o](),
                    f = i[c](),
                    s = l != u,
                    v = f != a,
                    m = t.find(function(n) {
                        return r >= n[0];
                    });
                return (
                    (u = l),
                    (a = f),
                    ((7 == m[2] && s) || (4 == m[2] && v) ? m[3] : m[1])(i)
                );
            });
        };
    }
    function yn(n, t, e) {
        return new Date(n, t, e);
    }
    function xn(n) {
        return function(t, e, r, u) {
            var a = [],
                i = r >= fn && sn > r,
                m = n(t),
                h = m / 1e3,
                p = yn(m[o](), m[l](), i ? 1 : m[c]()),
                d = p / 1e3;
            if (i)
                for (
                    var b = r / fn,
                        y = h == d ? h : yn(p[o](), p[l]() + b, 1) / 1e3,
                        x = new Date(1e3 * y),
                        w = x[o](),
                        M = x[l](),
                        Y = 0;
                    e >= y;
                    Y++
                )
                    (y = yn(w, M + b * Y, 1) / 1e3) > e || a.push(y);
            else {
                var D = d + (t - h) + T(h - d, cn > r ? r : cn);
                a.push(D);
                for (
                    var E = n(D),
                        k = E[f]() + E[s]() / on + E[v]() / ln,
                        A = r / ln;
                    ;

                ) {
                    D += r;
                    var C = g(k + A) % 24,
                        S = n(D).getHours() - C;
                    if ((S > 1 && (S = -1), (D -= S * ln) > e)) break;
                    (k = (k + A) % 24),
                        0.7 > ((D - a[a.length - 1]) / r) * u || a.push(D);
                }
            }
            return a;
        };
    }
    var wn = h("{YYYY}-{MM}-{DD} {h}:{mm}{aa}"),
        Mn = {
            show: !0,
            scale: "x",
            space: 50,
            height: 53,
            side: 0,
            class: "x-vals",
            grid: an,
        },
        Yn = { scale: "x", min: D, max: -D },
        Dn = vn.concat([
            1,
            2,
            5,
            10,
            20,
            50,
            100,
            200,
            500,
            1e3,
            2e3,
            5e3,
            1e4,
            2e4,
            5e4,
            1e5,
            2e5,
            5e5,
            1e6,
            2e6,
            5e6,
            1e7,
            2e7,
            5e7,
            1e8,
            2e8,
            5e8,
            1e9,
        ]);
    function En(n) {
        return n;
    }
    function Tn(n, t, e, r, u) {
        for (var a = [], i = (n = u ? n : k(T(n, e))); t >= i; i = k(i + e))
            a.push(i);
        return a;
    }
    function kn(n) {
        return n;
    }
    var An = {
            show: !0,
            scale: "y",
            space: 40,
            width: 50,
            side: 1,
            class: "y-vals",
            grid: an,
        },
        Cn = {
            scale: "y",
            show: !0,
            band: !1,
            alpha: 1,
            values: null,
            min: D,
            max: -D,
            path: null,
        },
        Sn = {};
    function Wn() {
        var n = [];
        return {
            sub: function(t) {
                n.push(t);
            },
            unsub: function(t) {
                n = n.filter(function(n) {
                    return n != t;
                });
            },
            pub: function(t, e, r, u, a, i, o) {
                n.length > 1 &&
                    n.forEach(function(n) {
                        n != e && n.pub(t, e, r, u, a, i, o);
                    });
            },
        };
    }
    function zn(n, t, e) {
        return [].concat(n.x, n.y).map(function(n, r) {
            return A({}, 0 == r ? t : e, n);
        });
    }
    function Ln(n) {
        return { x: n[0], y: n.slice(1) };
    }
    function Pn(n, t, e) {
        return null == n ? n : b((1 - (n - t.min) / (t.max - t.min)) * e);
    }
    function Hn(n, t, e) {
        return b(((n - t.min) / (t.max - t.min)) * e);
    }
    function Fn(n, t) {
        return [n, t];
    }
    function Jn(n, t) {
        var e = t - n,
            r = Y(e || d(t) || 1),
            u = g(r),
            a = M(10, u) / 5,
            i = 0 == e ? a : 0,
            o = k(
                (function(n, t) {
                    return g(n / t) * t;
                })(n - i, a)
            ),
            l = k(T(t + i, a));
        return (
            0 == e
                ? t > 0
                    ? (o = 0)
                    : 0 > t && (l = 0)
                : (a > l - t && (l += a),
                  a > n - o && (o -= a),
                  n >= 0 && 0 > o && (o = 0),
                  0 >= t && l > 0 && (l = 0)),
            [o, l]
        );
    }
    function Nn(n) {
        return 0 == n.button;
    }
    return (
        (n.Line = function(n, t) {
            var e = this,
                r = zn(n.series, Yn, Cn),
                u = zn(n.axes || {}, Mn, An),
                a = (n.scales = n.scales || {}),
                i =
                    n.tzDate ||
                    function(n) {
                        return new Date(1e3 * n);
                    },
                o = xn(i),
                l = bn(i, gn),
                c = (function(n) {
                    return function(t) {
                        return wn(n(t));
                    };
                })(i);
            (e.series = Ln(r)), (e.axes = Ln(u)), (e.scales = a);
            var f = A({ show: !0 }, n.legend);
            r.forEach(function(n, t) {
                var e = n.scale,
                    r = (a[e] = A(
                        { type: 1, time: 0 == t, auto: !0, min: D, max: -D },
                        a[e]
                    ));
                (r.range = E(r.range || (t > 0 && !r.time ? Jn : Fn))),
                    null == n.time && (n.time = r.time);
                var u = n.time;
                (n.value = n.value || (u ? c : kn)),
                    (n.label = n.label || (u ? "Time" : "Value")),
                    (n.width = n.width || 1);
            });
            var s,
                v = A({ show: !0, cross: !0 }, n.cursor),
                m = v.focus;
            function h(n, r, u) {
                (s = (t = n)[0].length),
                    Xn(),
                    Gn(null != r ? r : e.i0, null != u ? u : e.i1);
            }
            function p(n, t, e, r) {
                (Vn.strokeStyle = n || O),
                    (Vn.lineWidth = t || 1),
                    (Vn.lineJoin = "round"),
                    Vn.setLineDash(e || []),
                    (Vn.fillStyle = r || O);
            }
            (e.i0 = null), (e.i1 = null), (e.setData = h);
            var y = $("uplot");
            null != n.id && (y.id = n.id),
                null != n.class && G(y, n.class),
                null != n.title && ($("title", y).textContent = n.title);
            var M = $("wrap", y),
                Y = $("plot", M),
                T = n[S],
                k = n[W],
                en = T,
                an = k,
                on = 0,
                ln = 0,
                cn = !1,
                fn = !1;
            u.forEach(function(n) {
                if (n.show) {
                    var t = n.side,
                        e = null != n.label ? 30 : 0;
                    if (t % 2) {
                        var r = n[S] + e;
                        (en -= r), 1 == t ? ((on += r), (fn = !0)) : (cn = !0);
                    } else {
                        var u = n[W] + e;
                        (an -= u), 2 == t && (ln += u);
                    }
                    null == n.time && (n.time = a[n.scale].time);
                    var c = a[n.scale],
                        f = n.time;
                    (n.space = E(n.space)),
                        (n.incrs = n.incrs || (f && 1 == c.type ? mn : Dn)),
                        (n.ticks = E(n.ticks || (f && 1 == c.type ? o : Tn)));
                    var s = n.values;
                    n.values = f ? (C(s) ? bn(i, hn(s)) : s || l) : s || En;
                }
            }),
                (fn || cn) &&
                    (cn || (en -= An[S]), fn || ((en -= An[S]), (on += An[S])));
            var sn = T - on,
                vn = k - ln,
                pn = on + en,
                dn = ln + an;
            function yn(n, t, e) {
                var r = n.side,
                    u = r % 2,
                    a = $((u ? "y-" : "x-") + t + "-" + r, M);
                if (((a.style.color = n.color), G(a, n.class), u)) {
                    var i = e || n[S];
                    I(a, S, i),
                        I(a, W, an),
                        I(a, z, ln),
                        1 == r
                            ? (I(a, H, sn), (sn += i))
                            : (I(a, P, pn), (pn += i));
                } else {
                    var o = e || n[W];
                    I(a, W, o),
                        I(a, S, en),
                        I(a, P, on),
                        2 == r
                            ? (I(a, L, vn), (vn += o))
                            : (I(a, z, dn), (dn += o));
                }
                return a;
            }
            u.forEach(function(n) {
                if (n.show && ((n.vals = yn(n, "values")), null != n.label)) {
                    var t = n.side,
                        e = t % 2,
                        r = $("label", yn(n, "labels", 30));
                    if (((r.textContent = n.label), I(r, W, 30), e)) {
                        I(r, S, an);
                        var u = r.style;
                        3 == t
                            ? K(u, "0 0", 90, -30)
                            : K(u, "100% 0", -90, -an);
                    }
                }
            }),
                I(Y, z, ln),
                I(Y, P, on),
                I(M, S, T),
                I(M, W, k);
            var On = (function(n, t) {
                    var e = U[N]("canvas"),
                        r = e.getContext("2d");
                    return (
                        (e[S] = b(n * Z)),
                        (e[W] = b(t * Z)),
                        I(e, S, n),
                        I(e, W, t),
                        { can: e, ctx: r }
                    );
                })(en, an),
                Rn = On.can,
                Vn = On.ctx;
            function _n() {
                if (dt) bt = !0;
                else {
                    var n = {};
                    for (var u in (r.forEach(function(r, u) {
                        var i = r.scale,
                            o = a[i];
                        if (
                            (null == n[i] &&
                                ((n[i] = { min: o.min, max: o.max }),
                                (o.min = D),
                                (o.max = -D)),
                            0 == u)
                        ) {
                            var l = o.range(
                                2 == o.type ? e.i0 : t[0][e.i0],
                                2 == o.type ? e.i1 : t[0][e.i1]
                            );
                            (o.min = r.min = l[0]), (o.max = r.max = l[1]);
                        } else if (r.show) {
                            var c =
                                r.min == D
                                    ? o.auto
                                        ? (function(n, t, e) {
                                              for (
                                                  var r = D, u = -D, a = t;
                                                  e >= a;
                                                  a++
                                              )
                                                  (r = x(r, n[a])),
                                                      (u = w(u, n[a]));
                                              return [r, u];
                                          })(t[u], e.i0, e.i1)
                                        : [0, 100]
                                    : [r.min, r.max];
                            (o.min = x(o.min, (r.min = c[0]))),
                                (o.max = w(o.max, (r.max = c[1])));
                        }
                    }),
                    a)) {
                        var i = a[u];
                        if (null == i.base && i.min != D) {
                            var o = i.range(i.min, i.max);
                            (i.min = o[0]), (i.max = o[1]);
                        }
                    }
                    for (var l in a) {
                        var c = a[l];
                        if (null != c.base) {
                            var f = a[c.base];
                            if (f.min != D) {
                                var s = c.range(f.min, f.max);
                                (c.min = s[0]), (c.max = s[1]);
                            }
                        }
                    }
                    r.forEach(function(t) {
                        var e = t.scale,
                            r = a[e];
                        (r.min == n[e].min && r.max == n[e].max) ||
                            (t.path = null);
                    });
                }
            }
            var jn,
                qn,
                Bn,
                Un = 1;
            function Xn() {
                r.forEach(function(n) {
                    (n.min = D), (n.max = -D), (n.path = null);
                });
            }
            function Zn() {
                dt
                    ? (gt = !0)
                    : (Vn.clearRect(0, 0, Rn[S], Rn[W]),
                      (function() {
                          u.forEach(function(n, e) {
                              if (n.show) {
                                  var r = 0 == e ? 0 : 1,
                                      u = 0 == r ? S : W,
                                      i = 0 == r ? en : an,
                                      o = 0 == r ? W : S,
                                      l = a[n.scale],
                                      c = n.vals[F];
                                  if (l.min != D) {
                                      var f = l.min,
                                          s = l.max,
                                          v = n.space(f, s, i),
                                          m = (function(n, t, e, r) {
                                              for (
                                                  var u = e / n, a = 0;
                                                  t.length > a;
                                                  a++
                                              ) {
                                                  var i = t[a] * u;
                                                  if (i >= r) return [t[a], i];
                                              }
                                          })(s - f, n.incrs, i, v),
                                          h = m[1],
                                          d = n.ticks(
                                              f,
                                              s,
                                              m[0],
                                              h / v,
                                              2 == l.type
                                          ),
                                          g = 0 == r ? Hn : Pn,
                                          y = 0 == r ? P : z,
                                          x = d.map(function(n) {
                                              return g(n, l, Rn[u]);
                                          }),
                                          w = n.values(
                                              2 == l.type
                                                  ? d.map(function(n) {
                                                        return t[0][n];
                                                    })
                                                  : d,
                                              h
                                          );
                                      x.forEach(function(t, e) {
                                          c = (function(n, t, e, r, u) {
                                              var a = n || $(null, t);
                                              return (
                                                  (a.textContent = e),
                                                  I(a, r, u),
                                                  a
                                              );
                                          })(c, n.vals, w[e], y, b(t / Z))[J];
                                      }),
                                          c && nn(c);
                                      var M = n.grid;
                                      if (M) {
                                          var Y = (M[S] % 2) / 2;
                                          Vn.translate(Y, Y),
                                              p(
                                                  M.color || "#eee",
                                                  M[S],
                                                  M.dash
                                              ),
                                              Vn.beginPath(),
                                              x.forEach(function(n) {
                                                  var t, e, u, a;
                                                  0 == r
                                                      ? ((e = 0),
                                                        (a = Rn[o]),
                                                        (t = u = n))
                                                      : ((t = 0),
                                                        (u = Rn[o]),
                                                        (e = a = n)),
                                                      Vn.moveTo(t, e),
                                                      Vn.lineTo(u, a);
                                              }),
                                              Vn.stroke(),
                                              Vn.translate(-Y, -Y);
                                      }
                                  } else c && nn(c);
                              }
                          });
                      })(),
                      (function() {
                          r.forEach(function(n, u) {
                              u > 0 &&
                                  n.show &&
                                  null == n.path &&
                                  (function(n, t, u, a, i) {
                                      for (
                                          var o,
                                              l,
                                              c,
                                              f = r[n],
                                              s = (f.path =
                                                  1 == Un
                                                      ? new Path2D()
                                                      : r[n - 1].path),
                                              v = f[S],
                                              m = (v % 2) / 2,
                                              h = !1,
                                              p = D,
                                              d = -D,
                                              g = 1 == Un ? m : Rn[S] + m,
                                              b = 1 == Un ? e.i0 : e.i1;
                                          1 == Un ? e.i1 >= b : b >= e.i0;
                                          b += Un
                                      )
                                          (l = Hn(
                                              2 == a.type ? b : t[b],
                                              a,
                                              Rn[S]
                                          )),
                                              (c = Pn(u[b], i, Rn[W])),
                                              -1 == Un &&
                                                  b == e.i1 &&
                                                  s.lineTo(l, c),
                                              null == c
                                                  ? ((h = !0), s.moveTo(l, o))
                                                  : (v >
                                                    (1 == Un ? l - g : g - l)
                                                        ? ((p = x(c, p)),
                                                          (d = w(c, d)))
                                                        : (h
                                                              ? (s.moveTo(l, c),
                                                                (h = !1))
                                                              : (1 == Un
                                                                    ? b > e.i0
                                                                    : e.i1 >
                                                                      b) &&
                                                                (s.lineTo(g, d),
                                                                s.lineTo(g, p),
                                                                s.lineTo(g, o),
                                                                s.lineTo(l, c)),
                                                          (p = d = c),
                                                          (g = l)),
                                                    (o = c));
                                      f.band &&
                                          (-1 == Un && s.closePath(),
                                          (Un *= -1));
                                  })(u, t[0], t[u], a[r[0].scale], a[n.scale]);
                          }),
                              r.forEach(function(n, t) {
                                  t > 0 &&
                                      n.show &&
                                      (function(n) {
                                          var t = r[n];
                                          if (1 == Un) {
                                              var e = t.path,
                                                  u = t[S],
                                                  i = (u % 2) / 2;
                                              if (
                                                  (p(
                                                      t.color,
                                                      u,
                                                      t.dash,
                                                      t.fill
                                                  ),
                                                  (Vn.globalAlpha = t.alpha),
                                                  Vn.translate(i, i),
                                                  t.band)
                                              )
                                                  Vn.fill(e);
                                              else if (
                                                  (Vn.stroke(e), null != t.fill)
                                              ) {
                                                  var o = Pn(
                                                      0,
                                                      a[t.scale],
                                                      Rn[W]
                                                  );
                                                  e.lineTo(Rn[S], o),
                                                      e.lineTo(0, o),
                                                      Vn.fill(e);
                                              }
                                              Vn.translate(-i, -i),
                                                  (Vn.globalAlpha = 1);
                                          }
                                          t.band && (Un *= -1);
                                      })(t);
                              });
                      })(),
                      (jn = !0));
            }
            function Gn(n, t) {
                (jn = !1),
                    (n == e.i0 && t == e.i1) || Xn(),
                    (e.i0 = n),
                    (e.i1 = t),
                    _n(),
                    v.show && xt(),
                    !jn && Zn(),
                    (jn = !1);
            }
            e.setView = Gn;
            var In = null,
                Kn = null;
            if (v.show && v.cross) {
                var Qn = "cursor-";
                (qn = $(Qn + "vt", Y)),
                    (Bn = $(Qn + "hz", Y)),
                    (In = en / 2),
                    (Kn = an / 2);
            }
            var $n = v.show ? $("zoom", Y) : null,
                nt = null,
                tt = null,
                et = !1;
            if (f.show) {
                nt = Q("table", "legend", y);
                var rt,
                    ut = r[1].values;
                if ((et = null != ut)) {
                    var at = Q("tr", "labels", nt);
                    for (var it in (Q("th", null, at), (rt = ut(0))))
                        Q("th", null, at).textContent = it;
                } else (rt = { _: 0 }), G(nt, "inline");
                tt = r.map(function(n, t) {
                    if (0 == t && et) return null;
                    var e = [],
                        r = Q("tr", "series", nt),
                        u = Q("th", null, r);
                    for (var a in ((u.textContent = n.label),
                    (u.style.color = n.color),
                    t > 0 &&
                        (rn("click", u, function(n) {
                            Ct || (Nn(n) && lt(t, null, Pt.toggle));
                        }),
                        m &&
                            rn("mouseenter", u, function() {
                                Ct || vt(t, m.alpha, Pt.focus);
                            })),
                    rt)) {
                        var i = Q("td", null, r);
                        (i.textContent = "--"), e.push(i);
                    }
                    return e;
                });
            }
            function ot(n) {
                var t = tt[n][0].parentNode;
                r[n].show
                    ? (function(n) {
                          n[R].remove("off");
                      })(t)
                    : (G(t, "off"), v.show && tn(mt[n], 0, -10));
            }
            function lt(n, t, u) {
                (C(n) ? n : [n]).forEach(function(n) {
                    var e = r[n];
                    if (((e.show = null != t ? t : !e.show), ot(n), e.band)) {
                        var u = r[n + 1].band ? n + 1 : n - 1;
                        (r[u].show = e.show), ot(u);
                    }
                }),
                    Gn(e.i0, e.i1),
                    u && Ft.pub("toggle", e, n, t);
            }
            function ct(n, t) {
                r[n].alpha = tt[n][0].parentNode.style.opacity = t;
            }
            e.toggle = lt;
            var ft = Array(r.length),
                st = null;
            function vt(n, t, u) {
                n != st &&
                    (r.forEach(function(e, u) {
                        !(function(n, t) {
                            var e = r[n];
                            ct(n, t),
                                e.band && ct(r[n + 1].band ? n + 1 : n - 1, t);
                        })(u, null == n || 0 == u || u == n ? 1 : t);
                    }),
                    (st = n),
                    Zn(),
                    u && Ft.pub("focus", e, n));
            }
            (e.focus = vt),
                m &&
                    rn("mouseleave", nt, function() {
                        Ct || xt();
                    });
            var mt = v.show
                    ? r.map(function(n, t) {
                          if (t > 0 && n.show) {
                              var e = $("point", Y);
                              return (e.style.background = n.color), e;
                          }
                      })
                    : null,
                ht = !1;
            function pt(n) {
                var u = (function(n) {
                        return x(w(n, 0), 1);
                    })(n / en),
                    i = a[r[0].scale],
                    o = i.min + u * (i.max - i.min);
                return 2 == i.type
                    ? b(o)
                    : (function(n, t, e, r) {
                          var u;
                          e = e || 0;
                          for (
                              var a = 2147483647 >= (r = r || t.length - 1);
                              r - e > 1;

                          )
                              n > t[(u = a ? (e + r) >> 1 : g((e + r) / 2))]
                                  ? (e = u)
                                  : (r = u);
                          return n - t[e] > t[r] - n ? r : e;
                      })(o, t[0], e.i0, e.i1);
            }
            var dt = !1,
                gt = !1,
                bt = !1,
                yt = !1;
            function xt(n) {
                if (dt) yt = !0;
                else {
                    (ht = !1),
                        v.show && v.cross && (tn(qn, In, 0), tn(Bn, 0, Kn));
                    for (
                        var u = pt(In),
                            i = a[r[0].scale],
                            o = Hn(2 == i.type ? u : t[0][u], i, en),
                            l = 0;
                        r.length > l;
                        l++
                    ) {
                        var c = r[l];
                        if (l > 0 && c.show) {
                            var s = Pn(t[l][u], a[c.scale], an);
                            null == s && (s = -10),
                                (ft[l] = s > 0 ? d(s - Kn) : D),
                                v.show && tn(mt[l], o, s);
                        } else ft[l] = D;
                        if (f.show) {
                            if (0 == l && et) continue;
                            var h = et ? c.values(u) : { _: c.value(t[l][u]) },
                                p = 0;
                            for (var g in h) tt[l][p++][F].nodeValue = h[g];
                        }
                    }
                    if (Yt) {
                        var b = x(wt, In),
                            y = w(wt, In);
                        I($n, P, b), I($n, S, y - b);
                    }
                    if (!1 !== n && (Ft.pub(V, e, In, Kn, en, an, u), m)) {
                        var M = x.apply(null, ft),
                            Y = null;
                        M > m.prox ||
                            ft.some(function(n, t) {
                                if (n == M) return (Y = t);
                            }),
                            vt(Y, m.alpha, Pt.focus);
                    }
                }
            }
            e.batch = function(n) {
                (dt = !0),
                    n(e),
                    (dt = !1),
                    bt && _n(),
                    yt && xt(),
                    gt && !jn && Zn(),
                    (bt = yt = gt = jn = dt);
            };
            var wt = null,
                Mt = null,
                Yt = !1,
                Dt = null;
            function Et() {
                Dt = Rn.getBoundingClientRect();
            }
            function Tt(n, t, e, r, u, a) {
                Ct ||
                    (null == Dt && Et(),
                    kt(n, 0, e, r, u, a, 0, !1),
                    null != n ? ht || ((ht = !0), B(xt)) : xt(!1));
            }
            function kt(n, t, e, r, u, a, i, o) {
                null != n
                    ? ((e = n.clientX - Dt.left), (r = n.clientY - Dt.top))
                    : ((e = en * (e / u)), (r = an * (r / a))),
                    o ? ((wt = e), (Mt = r)) : ((In = e), (Kn = r));
            }
            function At(n, t, r, u, a, i) {
                (null == n || Nn(n)) &&
                    ((Yt = !0),
                    kt(n, 0, r, u, a, i, 0, !0),
                    null != n &&
                        (rn(j, U, St), Ft.pub(_, e, wt, Mt, en, an, null)));
            }
            var Ct = !1;
            function St(n, t, r, u, a, i) {
                if (null == n || Nn(n)) {
                    if (
                        ((Yt = !1),
                        kt(n, 0, r, u, a, i, 0, !1),
                        In != wt || Kn != Mt)
                    ) {
                        I($n, P, 0), I($n, S, 0);
                        var o = x(wt, In),
                            l = w(wt, In);
                        Gn(pt(o), pt(l));
                    } else (Ct = !Ct) || xt();
                    null != n &&
                        (un(j, U, St), Ft.pub(j, e, In, Kn, en, an, null));
                }
            }
            function Wt(n) {
                (0 == e.i0 && e.i1 == s - 1) ||
                    (Gn(0, s - 1),
                    null != n && Ft.pub(q, e, In, Kn, en, an, null));
            }
            var zt = {};
            if (
                ((zt[_] = At),
                (zt[V] = Tt),
                (zt[j] = St),
                (zt[q] = Wt),
                (zt.focus = function(n, t, e) {
                    vt(e, m.alpha);
                }),
                (zt.toggle = function(n, t, e, r) {
                    lt(e, r);
                }),
                v.show)
            ) {
                rn(_, Rn, At), rn(V, Rn, Tt), rn(q, Rn, Wt);
                var Lt = (function(n) {
                    var t = null;
                    function e() {
                        (t = null), n();
                    }
                    return function() {
                        clearTimeout(t), (t = setTimeout(e, 100));
                    };
                })(Et);
                rn("resize", X, Lt), rn("scroll", X, Lt);
            }
            e.root = y;
            var Pt = A({ key: null, toggle: !1, focus: !1 }, v.sync),
                Ht = Pt.key,
                Ft = null != Ht ? (Sn[Ht] = Sn[Ht] || Wn()) : Wn();
            Ft.sub(e),
                (e.pub = function(n, t, e, r, u, a, i) {
                    zt[n](null, t, e, r, u, a, i);
                }),
                h(t, 0, t[0].length - 1),
                (e.destroy = function() {
                    Ft.unsub(e),
                        un("resize", X, deb),
                        un("scroll", X, deb),
                        y.remove();
                }),
                Y.appendChild(Rn);
        }),
        (n.fmtDate = h),
        (n.tzDate = function(n, t) {
            return new Date(n.toLocaleString("en-US", { timeZone: t }));
        }),
        n
    );
})({});
